
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Loto: fun with lottery numbers &#8212; Loto 0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="LOTO" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="loto-fun-with-lottery-numbers">
<h1>Loto: fun with lottery numbers<a class="headerlink" href="#loto-fun-with-lottery-numbers" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-loto.x1_statistics">
<span id="x1-statistics"></span><h2>x1: statistics<a class="headerlink" href="#module-loto.x1_statistics" title="Permalink to this headline">¶</a></h2>
<p>Run statistical tests suites Dieharder &amp; ENT</p>
<p>Should be run from the CLI (depending on how you installed it), e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/core.py x1
</pre></div>
</div>
<p>But can also be run as a script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/x1_statistics.py
</pre></div>
</div>
<dl class="function">
<dt id="loto.x1_statistics.build_stats_tests_sets">
<code class="descclassname">loto.x1_statistics.</code><code class="descname">build_stats_tests_sets</code><span class="sig-paren">(</span><em>db_path</em>, <em>db_name</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x1_statistics.build_stats_tests_sets" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates test sets files from the DB.</p>
<p>A test set file is in the format: one number per line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_path</strong> (<em>str</em>) – path to the directory where the DB is stored.</p></li>
<li><p><strong>db_name</strong> (<em>str</em>) – name of the DB.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list containing the paths to the files juste created.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x1_statistics.check_installed_tools">
<code class="descclassname">loto.x1_statistics.</code><code class="descname">check_installed_tools</code><span class="sig-paren">(</span><em>desired_tools</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x1_statistics.check_installed_tools" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints out if any or all of the tools required are installed on the user’s machine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>desired_tools</strong> (<em>list</em>) – list of the tools wished to be run, e.g. [‘pracrand’, ‘ent’,
‘dieharder’].</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of actually installed tools, e.g. [‘pracrand’, ‘dieharder’].</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x1_statistics.main">
<code class="descclassname">loto.x1_statistics.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#loto.x1_statistics.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="loto.x1_statistics.run_tools">
<code class="descclassname">loto.x1_statistics.</code><code class="descname">run_tools</code><span class="sig-paren">(</span><em>installed_tools</em>, <em>list_paths</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x1_statistics.run_tools" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts a subprocess to run each requested tool, sequentially.</p>
<p>Each tool is ran with sensible defaults.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>installed_tools</strong> (<em>list</em>) – list of the tools to be run, e.g. [‘ent’, ‘dieharder’].</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-loto.x2_plots">
<span id="x2-plots"></span><h2>x2: plots<a class="headerlink" href="#module-loto.x2_plots" title="Permalink to this headline">¶</a></h2>
<p>Visualize the lottery numbers distribution with matplotlib.</p>
<p>Many different combinations of parameters can be tried here. Most graphs generated here are trying
to be visually pleasing if not very helpful :-)</p>
<p>Should be run from the CLI (depending on how you installed it), e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/core.py x2
</pre></div>
</div>
<p>But can also be run as a script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/x2_plots.py
</pre></div>
</div>
<dl class="function">
<dt id="loto.x2_plots.gen_area_plot">
<code class="descclassname">loto.x2_plots.</code><code class="descname">gen_area_plot</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x2_plots.gen_area_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates an area plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>dataframe</em>) – pandas dataframe containing all the draw results for the lottery
(dates/balls/stars).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a string containing either a success or failure message.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x2_plots.gen_heatmap">
<code class="descclassname">loto.x2_plots.</code><code class="descname">gen_heatmap</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x2_plots.gen_heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a heatmap image.</p>
<p>On the y-axis the draw dates, on the x-axis the balls and stars. Generates a nice image of the
distribution of the numbers more than anything else. The image is written to the images dir.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>dataframe</em>) – pandas dataframe containing all the draw results for the lottery
(dates/balls/stars).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a string containing either a success or failure message.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x2_plots.gen_line_plot">
<code class="descclassname">loto.x2_plots.</code><code class="descname">gen_line_plot</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x2_plots.gen_line_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a line plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>dataframe</em>) – pandas dataframe containing all the draw results for the lottery
(dates/balls/stars).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a string containing either a success or failure message.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x2_plots.gen_pie_plot">
<code class="descclassname">loto.x2_plots.</code><code class="descname">gen_pie_plot</code><span class="sig-paren">(</span><em>df</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x2_plots.gen_pie_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates pie plots.</p>
<p>Shows the distribution of numbers drawn per ball (e.g. how many times the number 42 was drawn
for ball n°3).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>df</strong> (<em>dataframe</em>) – pandas dataframe containing all the draw results for the lottery
(dates/balls/stars).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a string containing either a success or failure message.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x2_plots.load_plots_dataframe">
<code class="descclassname">loto.x2_plots.</code><code class="descname">load_plots_dataframe</code><span class="sig-paren">(</span><em>db_path</em>, <em>db_name</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x2_plots.load_plots_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a pandas dataframe containing all the rows &amp; columns of the numbers table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_path</strong> (<em>str</em>) – path to the directory where the DB is stored.</p></li>
<li><p><strong>db_name</strong> (<em>str</em>) – name of the DB.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>one to one extraction of the table.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x2_plots.main">
<code class="descclassname">loto.x2_plots.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#loto.x2_plots.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-loto.x3_oeis">
<span id="x3-oeis"></span><h2>x3: OEIS<a class="headerlink" href="#module-loto.x3_oeis" title="Permalink to this headline">¶</a></h2>
<p>Query the On-line Encyclopedia of Integer Sequences.</p>
<p>For now we query with the 10 latest draws numbers (5 balls + 7 stars). But many combinations can be
tried:longer sequences, sequences randomly picked, etc.</p>
<p>Should be run from the CLI (depending on how you installed it), e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/core.py x3
</pre></div>
</div>
<p>But can also be run as a script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/x3_oeis.py
</pre></div>
</div>
<dl class="function">
<dt id="loto.x3_oeis.balls_by_draws">
<code class="descclassname">loto.x3_oeis.</code><code class="descname">balls_by_draws</code><span class="sig-paren">(</span><em>draws</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x3_oeis.balls_by_draws" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates URLs used to query OEIS’ database.</p>
<p>Concatenates sequences of numbers in the format expected by the OEIS’ API.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of URLs.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x3_oeis.check_sequences_oeis">
<code class="descclassname">loto.x3_oeis.</code><code class="descname">check_sequences_oeis</code><span class="sig-paren">(</span><em>urls</em>, <em>seconds</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x3_oeis.check_sequences_oeis" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if given sequences returns something from the OEIS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>urls</strong> (<em>list</em>) – list of prepared urls to try.</p></li>
<li><p><strong>seconds</strong> (<em>float</em>) – number of seconds to wait between requests.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x3_oeis.get_latest_draws">
<code class="descclassname">loto.x3_oeis.</code><code class="descname">get_latest_draws</code><span class="sig-paren">(</span><em>db_path</em>, <em>db_name</em>, <em>nb_draws</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x3_oeis.get_latest_draws" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates sequences from the latest n draws.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_path</strong> (<em>str</em>) – path to the directory where the DB is stored.</p></li>
<li><p><strong>db_name</strong> (<em>str</em>) – name of the DB.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of tuples of ints [(15, 31, 40, 44, 48, 1, 12), (16, 1, 2, 7, 48, 1, 12), etc.].</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x3_oeis.main">
<code class="descclassname">loto.x3_oeis.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#loto.x3_oeis.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-loto.x4_cpt_plus">
<span id="x4-cpt"></span><h2>x4: CPT+<a class="headerlink" href="#module-loto.x4_cpt_plus" title="Permalink to this headline">¶</a></h2>
<p>CPT+ - Use a Compact Prediction Tree Plus to predict the next winning numbers.</p>
<p>So many combinations are possible here. I made choices to limit the scope (what to put in and in
what form/shape/order).</p>
<p>Should be run from the CLI (depending on how you installed it), e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/core.py x4
</pre></div>
</div>
<p>But can also be run as a script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/x4_cpt_plus.py
</pre></div>
</div>
<dl class="function">
<dt id="loto.x4_cpt_plus.build_cptp_data">
<code class="descclassname">loto.x4_cpt_plus.</code><code class="descname">build_cptp_data</code><span class="sig-paren">(</span><em>db_path</em>, <em>db_name</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x4_cpt_plus.build_cptp_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds training sets files for the SPMF library.</p>
<p>Training sets files created using the DB. A training set file in the format expected by the
java SPMF library: ‘ -1 ‘ between each number within a sequence and ‘ -2’ to end a sequence
(see <a class="reference external" href="http://www.philippe-fournier-viger.com/spmf/CPTPlus.php">SPMF/CPT+ docs</a>). The files
are stored in the data/files folder.</p>
<p>We keep the numbers from the two last lotteries out of the training sets, instead we return
them as lists to build the prediction set (balls_draw_m2) and the verification set
(balls_draw_m1). Same for stars numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_path</strong> (<em>str</em>) – path to the directory where the DB is stored.</p></li>
<li><p><strong>db_name</strong> (<em>str</em>) – name of the DB.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>dictionary of lists {</dt><dd><p>‘paths’           : [strings],
‘balls_draw_m1’   : [ints],
‘balls_draw_m2’   : [ints],
‘stars_draw_m1’   : [ints],
‘stars_draw_m2’   : [ints]}</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x4_cpt_plus.load_training_set">
<code class="descclassname">loto.x4_cpt_plus.</code><code class="descname">load_training_set</code><span class="sig-paren">(</span><em>pkg</em>, <em>path</em>, <em>numbers=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x4_cpt_plus.load_training_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the training set file of training sequences.</p>
<p>Either simply load a training set file (in the tree) as is, or load a training set file
appended with an additional sequence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg</strong> (<em>jpype object</em>) – common root of the java package from which we load the classes we need.</p></li>
<li><p><strong>path</strong> (<em>str</em>) – filepath to the training file to load.</p></li>
<li><p><strong>numbers</strong> (<em>list</em>) – optional, number sequence(s) to append to training file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>training set object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>jpype object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x4_cpt_plus.main">
<code class="descclassname">loto.x4_cpt_plus.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#loto.x4_cpt_plus.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="loto.x4_cpt_plus.make_predictions">
<code class="descclassname">loto.x4_cpt_plus.</code><code class="descname">make_predictions</code><span class="sig-paren">(</span><em>pkg</em>, <em>prediction_model</em>, <em>previous_numbers</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x4_cpt_plus.make_predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over predictions until we get enough of them.</p>
<p>Make predictions for a given sequence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg</strong> (<em>jpype object</em>) – common root of the java package from which we load the classes we need.</p></li>
<li><p><strong>prediction_model</strong> (<em>jpype object</em>) – CPT+ java object trained, used here to make predictions.</p></li>
<li><p><strong>previous_numbers</strong> (<em>list</em>) – number sequence for which we want a prediction.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the predictions. A list of 5 numbers for the balls or a list of 2 for the stars.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x4_cpt_plus.prepare_prediction_request">
<code class="descclassname">loto.x4_cpt_plus.</code><code class="descname">prepare_prediction_request</code><span class="sig-paren">(</span><em>pkg</em>, <em>numbers</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x4_cpt_plus.prepare_prediction_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Turns a python list into a java sequence, in order to query for a prediction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg</strong> (<em>jpype object</em>) – common root of the java package from which we load the classes we need.</p></li>
<li><p><strong>numbers</strong> (<em>list</em>) – the sequence of numbers to use as a query/arg for the prediction.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>sequence of numbers in their java format.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>jpype object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x4_cpt_plus.print_report">
<code class="descclassname">loto.x4_cpt_plus.</code><code class="descname">print_report</code><span class="sig-paren">(</span><em>dict_nbs</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x4_cpt_plus.print_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Print DIY mini-table with predictions.</p>
</dd></dl>

</div>
<div class="section" id="module-loto.x5_prophet">
<span id="x5-prophet"></span><h2>x5: prophet<a class="headerlink" href="#module-loto.x5_prophet" title="Permalink to this headline">¶</a></h2>
<p>Prophet: ask FB’s Prophet to predict the next winning numbers.</p>
<p>Feed the balls/stars numbers as time series (one dataframe each) to Prophet. See what comes out.</p>
<p>Dissapointing results for now of course, prophet seems to show me what I already knew : the
gambler’s fallacy is real and on average a number between 1 and 50 is around 25 :-) Heavy computing
to get there…of course I’m joking here: there must be parameters to play with to get more
satisfying results. So next step: play with params, read the docs deeper.</p>
<p>Should be run from the CLI (depending on how you installed it), e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/core.py x5
</pre></div>
</div>
<p>But can also be run as a script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/x5_prophet.py
</pre></div>
</div>
<dl class="function">
<dt id="loto.x5_prophet.generate_plots">
<code class="descclassname">loto.x5_prophet.</code><code class="descname">generate_plots</code><span class="sig-paren">(</span><em>prophet</em>, <em>forecast</em>, <em>field</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x5_prophet.generate_plots" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate plots with matplotlib with prophet’s forecast data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prophet</strong> (<em>obj</em>) – the prophet object instance.</p></li>
<li><p><strong>forecast</strong> (<em>dataframe</em>) – dataframe containing prophet’s prediction.</p></li>
<li><p><strong>field</strong> (<em>str</em>) – name of the field (ball_1, star_2,…).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x5_prophet.load_prophet_dataframe">
<code class="descclassname">loto.x5_prophet.</code><code class="descname">load_prophet_dataframe</code><span class="sig-paren">(</span><em>db_path</em>, <em>db_name</em>, <em>y_field</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x5_prophet.load_prophet_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a pandas dataframe containing a time series with two columns: a date and a number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_path</strong> (<em>str</em>) – path to the directory where the DB is stored.</p></li>
<li><p><strong>db_name</strong> (<em>str</em>) – name of the DB.</p></li>
<li><p><strong>y_field</strong> (<em>str</em>) – name of the number field to extract (ball_1, star_2,…).</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Returns :</dt><dd><p>dataframe: time series of dates[‘ds’] + numbers[‘y’].</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x5_prophet.main">
<code class="descclassname">loto.x5_prophet.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#loto.x5_prophet.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="loto.x5_prophet.print_report">
<code class="descclassname">loto.x5_prophet.</code><code class="descname">print_report</code><span class="sig-paren">(</span><em>dict_nbs</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x5_prophet.print_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Print DIY mini-table with predictions.</p>
</dd></dl>

<dl class="class">
<dt id="loto.x5_prophet.suppress_stdout_stderr">
<em class="property">class </em><code class="descclassname">loto.x5_prophet.</code><code class="descname">suppress_stdout_stderr</code><a class="headerlink" href="#loto.x5_prophet.suppress_stdout_stderr" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A context manager for doing a “deep suppression” of stdout and stderr in
Python, i.e. will suppress all print, even if the print originates in a
compiled C/Fortran sub-function.
This will not suppress raised exceptions, since exceptions are printed
to stderr just before a script exits, and after the context manager has
exited (at least, I think that is why it lets exceptions through).
<a class="reference external" href="https://github.com/facebook/prophet/issues/223">Prophet’s github corresponding issue</a>.
<a class="reference external" href="https://stackoverflow.com/questions/11130156/suppress-stdout-stderr-print-from-python-functions">Corresponding SO question</a>.</p>
</dd></dl>

</div>
<div class="section" id="module-loto.x6_serendipity">
<span id="x6-serendipity"></span><h2>x6: serendipity<a class="headerlink" href="#module-loto.x6_serendipity" title="Permalink to this headline">¶</a></h2>
<p>Try different kinds of random</p>
<p>If nothing else works, going back to different sources of randomness to predict the next winning
numbers. The processes are run simultaneously to add bullshit (via multiprocessing/manager).</p>
<p>Should be run from the CLI (depending on how you installed it), e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/core.py x6
</pre></div>
</div>
<p>But can also be run as a script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/x6_serendipity.py
</pre></div>
</div>
<dl class="function">
<dt id="loto.x6_serendipity.anu_quantum_rng">
<code class="descclassname">loto.x6_serendipity.</code><code class="descname">anu_quantum_rng</code><span class="sig-paren">(</span><em>url</em>, <em>queue</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x6_serendipity.anu_quantum_rng" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets random numbers in hex format from ANU’s Quantum RNG.</p>
<p>Seven 128 bits long hex numbers are requested. Each of them is used to seed the random
function, one for each ball (5) and one for each star (2).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>) – ANU’s Quantum RNG preformated URL.</p></li>
<li><p><strong>queue</strong> (<em>obj</em>) – multiprocessing manager queue.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>the manager queue object appended with a dict containing the prediction.</dt><dd><p>5 balls (1, 50) and 2 stars (1, 12)
{‘balls’: [12, 13, 16, 41, 11], ‘stars’: [12, 1]}</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>obj</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x6_serendipity.main">
<code class="descclassname">loto.x6_serendipity.</code><code class="descname">main</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#loto.x6_serendipity.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="loto.x6_serendipity.nist_beacon">
<code class="descclassname">loto.x6_serendipity.</code><code class="descname">nist_beacon</code><span class="sig-paren">(</span><em>url</em>, <em>queue</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x6_serendipity.nist_beacon" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets latest pulse of entropy from NIST Beacon service.</p>
<p>The last pulse given by the beacon is used as a seed to generate random numbers for a
“prediction”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>) – NIST Beacon service URL for last pulse.</p></li>
<li><p><strong>queue</strong> (<em>obj</em>) – multiprocessing manager queue.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>the manager queue object appended with a dict containing the prediction.</dt><dd><p>5 balls (1, 50) and 2 stars (1, 12)
{‘balls’: [12, 13, 16, 41, 11], ‘stars’: [12, 1]}</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>obj</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x6_serendipity.os_random">
<code class="descclassname">loto.x6_serendipity.</code><code class="descname">os_random</code><span class="sig-paren">(</span><em>queue</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x6_serendipity.os_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates prediction with dev/urandom.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>queue</strong> (<em>obj</em>) – multiprocessing manager queue.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>the manager queue object appended with a dict containing the prediction.</dt><dd><p>5 balls (1, 50) and 2 stars (1, 12)
{‘balls’: [12, 13, 16, 41, 11], ‘stars’: [12, 1]}</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>obj</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.x6_serendipity.print_report">
<code class="descclassname">loto.x6_serendipity.</code><code class="descname">print_report</code><span class="sig-paren">(</span><em>dict_nbs</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x6_serendipity.print_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Print DIY mini-table with predictions.</p>
</dd></dl>

<dl class="function">
<dt id="loto.x6_serendipity.random_org">
<code class="descclassname">loto.x6_serendipity.</code><code class="descname">random_org</code><span class="sig-paren">(</span><em>urls</em>, <em>queue</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.x6_serendipity.random_org" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets random sequences of numbers from random.org service.</p>
<p>The service is called twice: once for the balls (5 ints between 1 and 50) and once for the
stars (2 ints between 1 and 12).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>urls</strong> (<em>dict</em>) – Random.org preformated URLs.</p></li>
<li><p><strong>queue</strong> (<em>obj</em>) – multiprocessing manager queue.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>the manager queue object appended with a dict containing the prediction.</dt><dd><p>5 balls (1, 50) and 2 stars (1, 12)
{‘balls’: [12, 13, 16, 41, 11], ‘stars’: [12, 1]}</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>obj</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-loto.core">
<span id="cli-wrapper"></span><h2>CLI wrapper<a class="headerlink" href="#module-loto.core" title="Permalink to this headline">¶</a></h2>
<p>Command line interface wrapper to make running the different experiments and creating (first run)
or refreshing the database a little friendlier for the user.</p>
<p>Should be run as a standalone script, depending on how you installed it, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python loto/core.py
</pre></div>
</div>
<dl class="function">
<dt id="loto.core.lazy_load">
<code class="descclassname">loto.core.</code><code class="descname">lazy_load</code><span class="sig-paren">(</span><em>slow_module</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.core.lazy_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Speed up CLI’s perceived responsiveness by lazy loading modules.</p>
<p><a class="reference external" href="https://bugs.python.org/msg214954">https://bugs.python.org/msg214954</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>slow_module</strong> (<em>str</em>) – the module to load.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-loto.helpers">
<span id="helpers"></span><h2>helpers<a class="headerlink" href="#module-loto.helpers" title="Permalink to this headline">¶</a></h2>
<p>Common helpers/utilities functions.</p>
<p>Helpers for downloading files, listing files in a directory, decompressing zipped folders,
reshaping data from a csv file, so it can be loaded in a sqlite3 DB.</p>
<dl class="function">
<dt id="loto.helpers.create_necessary_directories">
<code class="descclassname">loto.helpers.</code><code class="descname">create_necessary_directories</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.helpers.create_necessary_directories" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a path, creates all necessary folders to satisfy it.</p>
<p>If the path/folder already exists, nothing is done.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – path to the directory(ies) to be created.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.helpers.decompress_files">
<code class="descclassname">loto.helpers.</code><code class="descname">decompress_files</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.helpers.decompress_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Decompresses all zip files in a folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – path to the folder containing the zip files.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.helpers.download_files">
<code class="descclassname">loto.helpers.</code><code class="descname">download_files</code><span class="sig-paren">(</span><em>urls</em>, <em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.helpers.download_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the downloading of lottery files.</p>
<p>Destroys and recreates the download folder.
Downloads files from a given list of urls into that folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>urls</strong> (<em>list</em>) – list of urls of the files to be downloaded.</p></li>
<li><p><strong>path</strong> (<em>str</em>) – path to the download directory.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.helpers.get_next_lottery_date">
<code class="descclassname">loto.helpers.</code><code class="descname">get_next_lottery_date</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#loto.helpers.get_next_lottery_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the date of the next lottery day.</p>
<p>Euromillions is drawn every Tuesday and Friday. So depending on the current day, it will return
either next Tuesday or next Friday.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>next lottery day, returned as a pandas timestamp.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>timestamp</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.helpers.get_numbers_as_columns">
<code class="descclassname">loto.helpers.</code><code class="descname">get_numbers_as_columns</code><span class="sig-paren">(</span><em>db_path</em>, <em>db_name</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.helpers.get_numbers_as_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects lottery numbers as columns of numbers.</p>
<p>For each column containing either a ball number or a star number, extracts all numbers to a
list, sorted by date. The lists are returned as a dict of lists (of tuples).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_name</strong> (<em>str</em>) – name of the DB.</p></li>
<li><p><strong>db_path</strong> (<em>str</em>) – path to the directory where the DB is stored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary of lists of tuples {‘column_name’: [(number, number,…)]}.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.helpers.get_numbers_as_sequences">
<code class="descclassname">loto.helpers.</code><code class="descname">get_numbers_as_sequences</code><span class="sig-paren">(</span><em>db_path</em>, <em>db_name</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.helpers.get_numbers_as_sequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects lottery numbers as sequences of numbers (in the order drawn).</p>
<p>Extract all ball numbers in lists of 5 (one for each draw). And extract all star numbers in
lists of two. Return both lists in a dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_name</strong> (<em>str</em>) – name of the DB.</p></li>
<li><p><strong>db_path</strong> (<em>str</em>) – path to the directory where the DB is stored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dictionary of lists {‘balls’: [numbers], ‘stars’: [numbers]}.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.helpers.list_files">
<code class="descclassname">loto.helpers.</code><code class="descname">list_files</code><span class="sig-paren">(</span><em>path</em>, <em>ext</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.helpers.list_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists files in a folder for a specific extension.</p>
<p>Walks all files in a folder and returns a list containing the paths of the files in that folder
for a specific file extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – path to the directory to explore.</p></li>
<li><p><strong>ext</strong> (<em>str</em>) – extension of the files to list.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list containing paths.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.helpers.load_db">
<code class="descclassname">loto.helpers.</code><code class="descname">load_db</code><span class="sig-paren">(</span><em>numbers</em>, <em>db_path</em>, <em>db_name</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.helpers.load_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the numbers in the database.</p>
<p>Destroys and recreates the DB folder.
(Re)creates the DB.
Loads given data in the DB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>numbers</strong> (<em>list</em>) – euromillions winning numbers list.</p></li>
<li><p><strong>db_name</strong> (<em>str</em>) – name given to the DB.</p></li>
<li><p><strong>db_path</strong> (<em>str</em>) – path to the directory where the DB is stored.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.helpers.prepare_data">
<code class="descclassname">loto.helpers.</code><code class="descname">prepare_data</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.helpers.prepare_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares data to be loaded in the database.</p>
<p>Extract the data we want from the CSV files which is to be loaded in the DB.
Returns data in the shape we expect (as a python list).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – path to the folder containing the CSV files to prepare.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list containing columns corresponding to DB expectations.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="loto.helpers.spinning_cursor">
<code class="descclassname">loto.helpers.</code><code class="descname">spinning_cursor</code><span class="sig-paren">(</span><em>seconds</em><span class="sig-paren">)</span><a class="headerlink" href="#loto.helpers.spinning_cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows a spinning cursor for a number of seconds.</p>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Loto</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Loto: fun with lottery numbers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-loto.x1_statistics">x1: statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-loto.x2_plots">x2: plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-loto.x3_oeis">x3: OEIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-loto.x4_cpt_plus">x4: CPT+</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-loto.x5_prophet">x5: prophet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-loto.x6_serendipity">x6: serendipity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-loto.core">CLI wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-loto.helpers">helpers</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">LOTO</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Jonathan Guitton.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/loto.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>